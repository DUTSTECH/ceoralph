{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CEO Ralph Task",
  "description": "Schema for task definition in tasks.md",
  "type": "object",
  "required": ["id", "title", "do", "doneWhen"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+$",
      "description": "Task identifier (e.g., '1.1', '2.3')"
    },
    "title": {
      "type": "string",
      "description": "Brief task title"
    },
    "do": {
      "type": "string",
      "description": "What the task should accomplish"
    },
    "files": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Files to create or modify"
    },
    "context": {
      "type": "string",
      "description": "Reference to design.md section or other context"
    },
    "acceptance": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Acceptance criteria checklist"
    },
    "doneWhen": {
      "type": "string",
      "description": "Condition that marks task as complete"
    },
    "verify": {
      "type": "string",
      "description": "Command to verify task completion"
    },
    "commit": {
      "type": "string",
      "description": "Commit message format"
    },
    "worker": {
      "type": "string",
      "enum": ["codex", "ceo"],
      "default": "codex",
      "description": "Which agent handles this task"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["VERIFY", "P", "CRITICAL", "OPTIONAL"]
      },
      "description": "Task tags: VERIFY=qa checkpoint, P=parallel, CRITICAL=must pass, OPTIONAL=can skip"
    },
    "dependencies": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Task IDs this depends on"
    },
    "requirements": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Related requirement IDs from requirements.md"
    },
    "design": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Related design component IDs from design.md"
    },
    "status": {
      "type": "string",
      "enum": ["pending", "in-progress", "completed", "failed", "skipped"],
      "default": "pending"
    }
  }
}
